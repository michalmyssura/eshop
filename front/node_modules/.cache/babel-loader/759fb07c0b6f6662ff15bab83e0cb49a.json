{"ast":null,"code":"var _jsxFileName = \"/Users/michalmyssura/Desktop/projektdyplomowy/front/src/components/product/productDetails.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Loader from \"../layouts/Loader\";\nimport { Fragment, useState, useEffect } from 'react';\nimport MetaData from \"../layouts/MetaData\";\nimport { Carousel } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst productDetails = () => {\n  _s();\n\n  const [quantity, setQuantity] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const alert = useAlert();\n  const {\n    loading,\n    error,\n    product\n  } = useSelector(state => state.productDetails);\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const {\n    error: reviewError,\n    success\n  } = useSelector(state => state.newReview);\n  useEffect(() => {\n    dispatch(getProductDetails(match.params.id));\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (reviewError) {\n      alert.error(reviewError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success('Reivew posted successfully');\n      dispatch({\n        type: NEW_REVIEW_RESET\n      });\n    }\n  }, [dispatch, alert, error, reviewError, match.params.id, success]);\n\n  const addToCart = () => {\n    dispatch(addItemToCart(match.params.id, quantity));\n    alert.success('Item Added to Cart');\n  };\n\n  const increaseQty = () => {\n    const count = document.querySelector('.count');\n    if (count.valueAsNumber >= product.stock) return;\n    const qty = count.valueAsNumber + 1;\n    setQuantity(qty);\n  };\n\n  const decreaseQty = () => {\n    const count = document.querySelector('.count');\n    if (count.valueAsNumber <= 1) return;\n    const qty = count.valueAsNumber - 1;\n    setQuantity(qty);\n  };\n\n  function setUserRatings() {\n    const stars = document.querySelectorAll('.star');\n    stars.forEach((star, index) => {\n      star.starValue = index + 1;\n      ['click', 'mouseover', 'mouseout'].forEach(function (e) {\n        star.addEventListener(e, showRatings);\n      });\n    });\n\n    function showRatings(e) {\n      stars.forEach((star, index) => {\n        if (e.type === 'click') {\n          if (index < this.starValue) {\n            star.classList.add('orange');\n            setRating(this.starValue);\n          } else {\n            star.classList.remove('orange');\n          }\n        }\n\n        if (e.type === 'mouseover') {\n          if (index < this.starValue) {\n            star.classList.add('yellow');\n          } else {\n            star.classList.remove('yellow');\n          }\n        }\n\n        if (e.type === 'mouseout') {\n          star.classList.remove('yellow');\n        }\n      });\n    }\n  }\n\n  const reviewHandler = () => {\n    const formData = new FormData();\n    formData.set('rating', rating);\n    formData.set('comment', comment);\n    formData.set('productId', match.params.id);\n    dispatch(newReview(formData));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Fragment, {\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MetaData, {\n          title: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row d-flex justify-content-around\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-lg-5 img-fluid\",\n            id: \"product_image\",\n            children: /*#__PURE__*/_jsxDEV(Carousel, {\n              pause: \"hover\",\n              children: product.images && product.images.map(image => /*#__PURE__*/_jsxDEV(Carousel.Item, {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"d-block w-100\",\n                  src: image.url,\n                  alt: product.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 45\n                }, this)\n              }, image.public_id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-lg-5 mt-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product_id\",\n              children: [\"Product # \", product._id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating-outer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rating-inner\",\n                style: {\n                  width: `${product.ratings / 5 * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              id: \"no_of_reviews\",\n              children: [\"(\", product.numOfReviews, \" Reviews)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product_price\",\n              children: [\"$\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stockCounter d-inline\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"btn btn-danger minus\",\n                onClick: decreaseQty,\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"form-control count d-inline\",\n                value: quantity,\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"btn btn-primary plus\",\n                onClick: increaseQty,\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              id: \"cart_btn\",\n              className: \"btn btn-primary d-inline ml-4\",\n              disabled: product.stock === 0,\n              onClick: addToCart,\n              children: \"Add to Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                id: \"stock_status\",\n                className: product.stock > 0 ? 'greenColor' : 'redColor',\n                children: product.stock > 0 ? 'In Stock' : 'Out of Stock'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"mt-2\",\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"product_seller mb-3\",\n              children: [\"Sold by: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: product.seller\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 70\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 33\n            }, this), user ? /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"review_btn\",\n              type: \"button\",\n              className: \"btn btn-primary mt-4\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#ratingModal\",\n              onClick: setUserRatings,\n              children: \"Submit Your Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger mt-5\",\n              type: \"alert\",\n              children: \"Login to post your review.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row mt-2 mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rating w-50\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal fade\",\n                  id: \"ratingModal\",\n                  tabIndex: \"-1\",\n                  role: \"dialog\",\n                  \"aria-labelledby\": \"ratingModalLabel\",\n                  \"aria-hidden\": \"true\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-dialog\",\n                    role: \"document\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-content\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"modal-header\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          className: \"modal-title\",\n                          id: \"ratingModalLabel\",\n                          children: \"Submit Review\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 180,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          className: \"close\",\n                          \"data-dismiss\": \"modal\",\n                          \"aria-label\": \"Close\",\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            \"aria-hidden\": \"true\",\n                            children: \"\\xD7\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 182,\n                            columnNumber: 61\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 181,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"modal-body\",\n                        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                          className: \"stars\",\n                          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"star\",\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-star\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 188,\n                              columnNumber: 82\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 188,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"star\",\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-star\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 189,\n                              columnNumber: 82\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 189,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"star\",\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-star\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 190,\n                              columnNumber: 82\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 190,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"star\",\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-star\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 191,\n                              columnNumber: 82\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 191,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                            className: \"star\",\n                            children: /*#__PURE__*/_jsxDEV(\"i\", {\n                              className: \"fa fa-star\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 192,\n                              columnNumber: 82\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 192,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 187,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                          name: \"review\",\n                          id: \"review\",\n                          className: \"form-control mt-3\",\n                          value: comment,\n                          onChange: e => setComment(e.target.value)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 195,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn my-3 float-right review-btn px-4 text-white\",\n                          onClick: reviewHandler,\n                          \"data-dismiss\": \"modal\",\n                          \"aria-label\": \"Close\",\n                          children: \"Submit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 204,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }, this), product.reviews && product.reviews.length > 0 && /*#__PURE__*/_jsxDEV(ListReviews, {\n          reviews: product.reviews\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), \")\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n\n_s(productDetails, \"Qr3v7tZ3AkUERR69Xhd35WrGquI=\", true, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\nexport default productDetails;","map":{"version":3,"sources":["/Users/michalmyssura/Desktop/projektdyplomowy/front/src/components/product/productDetails.js"],"names":["React","Loader","Fragment","useState","useEffect","MetaData","Carousel","useDispatch","useSelector","productDetails","quantity","setQuantity","rating","setRating","comment","setComment","dispatch","alert","useAlert","loading","error","product","state","user","auth","reviewError","success","newReview","getProductDetails","match","params","id","clearErrors","type","NEW_REVIEW_RESET","addToCart","addItemToCart","increaseQty","count","document","querySelector","valueAsNumber","stock","qty","decreaseQty","setUserRatings","stars","querySelectorAll","forEach","star","index","starValue","e","addEventListener","showRatings","classList","add","remove","reviewHandler","formData","FormData","set","name","images","map","image","url","title","public_id","_id","width","ratings","numOfReviews","price","description","seller","target","value","reviews","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Loader from \"../layouts/Loader\";\nimport{ Fragment, useState, useEffect } from 'react'\nimport MetaData from \"../layouts/MetaData\";\nimport {Carousel} from \"react-bootstrap\";\nimport { useDispatch, useSelector } from 'react-redux'\n\n\nconst productDetails = () =>{\n    const [quantity, setQuantity] = useState(1)\n    const [rating, setRating] = useState(0);\n    const [comment, setComment] = useState('');\n\n    const dispatch = useDispatch();\n    const alert = useAlert();\n\n    const { loading, error, product } = useSelector(state => state.productDetails)\n    const { user } = useSelector(state => state.auth)\n    const { error: reviewError, success } = useSelector(state => state.newReview)\n\n    useEffect(() => {\n        dispatch(getProductDetails(match.params.id))\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (reviewError) {\n            alert.error(reviewError);\n            dispatch(clearErrors())\n        }\n\n        if (success) {\n            alert.success('Reivew posted successfully')\n            dispatch({ type: NEW_REVIEW_RESET })\n        }\n\n    }, [dispatch, alert, error, reviewError, match.params.id, success])\n\n    const addToCart = () => {\n        dispatch(addItemToCart(match.params.id, quantity));\n        alert.success('Item Added to Cart')\n    }\n\n    const increaseQty = () => {\n        const count = document.querySelector('.count')\n\n        if (count.valueAsNumber >= product.stock) return;\n\n        const qty = count.valueAsNumber + 1;\n        setQuantity(qty)\n    }\n\n    const decreaseQty = () => {\n\n        const count = document.querySelector('.count')\n\n        if (count.valueAsNumber <= 1) return;\n\n        const qty = count.valueAsNumber - 1;\n        setQuantity(qty)\n\n    }\n\n    function setUserRatings() {\n        const stars = document.querySelectorAll('.star');\n\n        stars.forEach((star, index) => {\n            star.starValue = index + 1;\n\n            ['click', 'mouseover', 'mouseout'].forEach(function (e) {\n                star.addEventListener(e, showRatings);\n            })\n        })\n\n        function showRatings(e) {\n            stars.forEach((star, index) => {\n                if (e.type === 'click') {\n                    if (index < this.starValue) {\n                        star.classList.add('orange');\n\n                        setRating(this.starValue)\n                    } else {\n                        star.classList.remove('orange')\n                    }\n                }\n\n                if (e.type === 'mouseover') {\n                    if (index < this.starValue) {\n                        star.classList.add('yellow');\n                    } else {\n                        star.classList.remove('yellow')\n                    }\n                }\n\n                if (e.type === 'mouseout') {\n                    star.classList.remove('yellow')\n                }\n            })\n        }\n    }\n\n    const reviewHandler = () => {\n        const formData = new FormData();\n\n        formData.set('rating', rating);\n        formData.set('comment', comment);\n        formData.set('productId', match.params.id);\n\n        dispatch(newReview(formData));\n    }\n\n    return(\n        <div>\n            <Fragment>\n                {loading ? <Loader /> : (\n                    <Fragment>\n                        <MetaData title={product.name} />\n                        <div className=\"row d-flex justify-content-around\">\n                            <div className=\"col-12 col-lg-5 img-fluid\" id=\"product_image\">\n                                <Carousel pause='hover'>\n                                    {product.images && product.images.map(image => (\n                                        <Carousel.Item key={image.public_id}>\n                                            <img className=\"d-block w-100\" src={image.url} alt={product.title} />\n                                        </Carousel.Item>\n                                    ))}\n                                </Carousel>\n                            </div>\n\n                            <div className=\"col-12 col-lg-5 mt-5\">\n                                <h3>{product.name}</h3>\n                                <p id=\"product_id\">Product # {product._id}</p>\n\n                                <hr />\n\n                                <div className=\"rating-outer\">\n                                    <div className=\"rating-inner\" style={{ width: `${(product.ratings / 5) * 100}%` }}></div>\n                                </div>\n                                <span id=\"no_of_reviews\">({product.numOfReviews} Reviews)</span>\n\n                                <hr />\n\n                                <p id=\"product_price\">${product.price}</p>\n                                <div className=\"stockCounter d-inline\">\n                                    <span className=\"btn btn-danger minus\" onClick={decreaseQty}>-</span>\n\n                                    <input type=\"number\" className=\"form-control count d-inline\" value={quantity} readOnly />\n\n                                    <span className=\"btn btn-primary plus\" onClick={increaseQty}>+</span>\n                                </div>\n                                <button type=\"button\" id=\"cart_btn\" className=\"btn btn-primary d-inline ml-4\" disabled={product.stock === 0} onClick={addToCart}>Add to Cart</button>\n\n                                <hr />\n\n                                <p>Status: <span id=\"stock_status\" className={product.stock > 0 ? 'greenColor' : 'redColor'} >{product.stock > 0 ? 'In Stock' : 'Out of Stock'}</span></p>\n\n                                <hr />\n\n                                <h4 className=\"mt-2\">Description:</h4>\n                                <p>{product.description}</p>\n                                <hr />\n                                <p id=\"product_seller mb-3\">Sold by: <strong>{product.seller}</strong></p>\n\n                                {user ? <button id=\"review_btn\" type=\"button\" className=\"btn btn-primary mt-4\" data-toggle=\"modal\" data-target=\"#ratingModal\" onClick={setUserRatings}>\n                                        Submit Your Review\n                                    </button>\n                                    :\n                                    <div className=\"alert alert-danger mt-5\" type='alert'>Login to post your review.</div>\n                                }\n\n\n                                <div className=\"row mt-2 mb-5\">\n                                    <div className=\"rating w-50\">\n\n                                        <div className=\"modal fade\" id=\"ratingModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"ratingModalLabel\" aria-hidden=\"true\">\n                                            <div className=\"modal-dialog\" role=\"document\">\n                                                <div className=\"modal-content\">\n                                                    <div className=\"modal-header\">\n                                                        <h5 className=\"modal-title\" id=\"ratingModalLabel\">Submit Review</h5>\n                                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                                            <span aria-hidden=\"true\">&times;</span>\n                                                        </button>\n                                                    </div>\n                                                    <div className=\"modal-body\">\n\n                                                        <ul className=\"stars\" >\n                                                            <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                            <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                            <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                            <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                            <li className=\"star\"><i className=\"fa fa-star\"></i></li>\n                                                        </ul>\n\n                                                        <textarea\n                                                            name=\"review\"\n                                                            id=\"review\" className=\"form-control mt-3\"\n                                                            value={comment}\n                                                            onChange={(e) => setComment(e.target.value)}\n                                                        >\n\n                                                    </textarea>\n\n                                                        <button className=\"btn my-3 float-right review-btn px-4 text-white\" onClick={reviewHandler} data-dismiss=\"modal\" aria-label=\"Close\">Submit</button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        {product.reviews && product.reviews.length > 0 && (\n                            <ListReviews reviews={product.reviews} />\n                        )}\n\n                    </Fragment>\n                )}\n            </Fragment>\n            )\n\n\n        </div>\n    )\n\n\n\n\n}\nexport default productDetails;\n"]},"metadata":{},"sourceType":"module"}